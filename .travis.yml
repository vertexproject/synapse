sudo: required
os:
    - linux
# trusty needed for docker
dist: trusty
language: python
python:
    - "3.6"
env:
    - SYN_TEST_CORE=py
matrix:
    include:
    - python: "3.6"
      env: SYN_TEST_PG_DB="syn_test"
    - python: "2.7"
      env: SYN_TEST_CORE=py
    - python: "3.4"
      env: SYN_TEST_CORE=py
    - python: "3.5"
      env: SYN_TEST_CORE=py
addons:
    postgresql: "9.6"
install:
    - python synapse/tests/travis/install.py
before_script:
    - python synapse/tests/travis/before_script.py
script: python synapse/tests/travis/script.py
after_success:
    - coveralls
    - python synapse/tests/travis/after_success_script.py
global:
    - COMMIT=${TRAVIS_COMMIT::8}
    - secure: uhCmtL5D0Lq8a3yXb+kCrSB0N6cbgTu6Hnb2pAKIicEaAcnubwcmDc9t7HMcGVuGAurBRFNu0qcw4uF1EtGI4KfbPrf5RNYXR8CZlusB4Aw9cWMPNaMb4drLrtu+LzZMFga4TbVsCf2jeDXnn5Dwh9DZy2G6o79P/RLv1NJChss2xeRzRE5R0oHHWQKSLZ5Q8quDBsrqgJeinsAJMpMpeJoJ3jk/0YIHJl72bPqmnCiibaDJDy9rn/I0MKx2bgwY74fcNbkhKqtXLGyRbQhZ/ndoVhDU8XrIIubM4v0GI50MYqpnsFls7Nb4joYIg1nUXoR/RzQu0o7i/rRhKJxIumUG7FiHlK9TUYAdpuMF2tWC5QXyQ0LbvkH1l8fFt1CaZvgWbGnV3mtXtLdnHbUXp5NIYXvaLuOvKhd0BDp42GpB8Yh8EW8Ktqnd1ZsKvXzNSn73ReA4W/JFecdV5Gjht+11iMny1DVfOPCs+bz5YRkcfpSlcgqoASxBW9RGFaunLlKOGqGHDf7WCRmmdGUL7NHOQwCWTGgwKvY0Wjf5oKrEIf63FZNI5cOb0TkhU69+IrxIRpGTgjDSS7+BBBfxXxOCd3BxhZ/g9h8AI4sVvV1q7UNIJPS0IyIr35p3Xox46e3C/xpfjJq4pMF6f1M3n7yW94oaNxbVAW6ZBZL455A=
    - secure: MuSN7zAtKiaX7xvPrtRNXRUmRbJmmetyoVjjOOuDYlAdDP8WBMODM/ZrmB09y7AnNbzJoa2sDSRE19bVOnLct9IHEtMkL41/nWxHFq8HVNUqodVG5HCVGtyi5Azun6LmIdyB80EgpnqN4DTMQmOKy0WpBpZO/Ieje2C5tN+/AwNrvV6CxIwXuvr1lIh9V0OAdYQc2R6qNp47zLyiKnPfmN2rTJm81HoHH/9y4J3gxP5Bx0rhetN1+SfKdulVFXGP0RKw5sM5m7jmvbQjsK4aa6ZyMNeJPRrhvIRQK5sO6d+q+Vrxp9nGRY/M8a7HtmozYuIY7Ip8trpPLstq1N257FP7iAy2lkovPzOThdJmG2G9BhxX+1rphGJzqIxCofZw/VvjdXKPxobcKfm0Xs3kXBoxnXb+WDt1rtk+w6KeSXFfLbOIfoUw9CuELZI6We8pcHtshTHc4czcp0Q9eL2RBqBgpcG4d1ss23icv3visTS0QfC0MmWTaHiHD7rqLopTdA6+KobLgrdlNY/IkEolYaesf0fP2OhvCeg0jDwT2XPjB9AYfYAdSK5qagaLF8mkei5hez9y0iGehFxR6EzdFwepWtLuLb104wrWFn3YsOe+WKnTziE/GdaGZ5hIpziv8QHwgO6nKeIkAT/BhQmlsefhOgAFJsvFQDzvTq8h+xs=
    - secure: VX4aVYmOP9fUZSXb6xCuYX9kifVA5gFzxUsEnCcGJ6kXB31NLSt0RjbqLZivx0qiS+jON83TBY82SaKupV4dLYrcTOoFCwPOvQ1TsFZLJa997NvoXRMROXWac5mURAr/aAgsSslxrPqAxJYotFr99BPSf1rlqCztimBEAOfUVFDySY4CBziBYPHCiLHjS1UCsF3t/aXeI2kv8yAuAaKwas2YPuqg4kUwHpg5SW1/Op9A4L28xMa26Y85kC6VM/3uVVqTLOj09CPb3/ObFx3ZRxdjVkZgnO8qohgVjnlD5WRY71Rdcg7tiooQHYsh2sq0q+q1WLycIahPQild3Q3xLXzRMBhS7hXYrOL2pb6XqPp3INAfigW9izj644bcXeDDostq+ojMXVZw3UpJ5O8hKDikX56IIQ2nUiO8XQr7ulQXFtQfXjQEx1jEug0EllER4ttCKiIf7BfRNGQ6acd1lDdJKTNbMCWCT9LoJcNZG9mlEXF06/3dOkZ3OiQy5TkXRECsB3bxOX+Ky9c/al272GFUg9pGU5aDGiSIR+yJHh3n6+rPM5d4TVPyPuCB/k0SNOTRUp3HbOXmmco82Y/AU/+u1I7TOJvMPbk58y9HjWWEhuGxydxiGTnbMf429+Yz3XOI95Yf1kn0wQ4v14tpvQKJ9+gW9xauOYP5+26Vv7U=
